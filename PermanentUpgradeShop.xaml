<Window x:Class="DeskWarrior.PermanentUpgradeShop"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:DeskWarrior.ViewModels"
        Title="ðŸ’Ž ì˜êµ¬ ì—…ê·¸ë ˆì´ë“œ ìƒì "
        Width="610"
        Height="600"
        MinHeight="600"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        Topmost="False"
        KeyDown="Window_KeyDown">

    <Window.Resources>
        <!-- ðŸŽ¨ COLOR PALETTE -->
        <!-- #1A1A1A - Frame Black (ì™¸ë¶€ í”„ë ˆìž„) -->
        <!-- #66666666 - Glass Gray (ê¸€ëž˜ìŠ¤ëª¨í”¼ì¦˜ - íšŒìƒ‰ 40% íˆ¬ëª…) -->
        <!-- #E8E8E8 - Panel Light (Body ë°°ê²½) -->
        <!-- #2A2A2A - Text Dark (í…ìŠ¤íŠ¸) -->
        <!-- #0099CC - Accent Blue (í¬ë¦¬ìŠ¤íƒˆ/ê°•ì¡°) -->
        <!-- #10B981 - Action Green (ë²„íŠ¼) -->
        <!-- #CCCCCC - Gray Disabled (ë¹„í™œì„±) -->
        <!-- #33FFFFFF - Glass Border (ê¸€ëž˜ìŠ¤ í…Œë‘ë¦¬ - í°ìƒ‰ 20% íˆ¬ëª…) -->

        <!-- Tab Button Style -->
        <Style x:Key="TabButton" TargetType="RadioButton">
            <Setter Property="Background" Value="#44FFFFFF"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#33FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#66FFFFFF"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background" Value="#0099CC"/>
                    <Setter Property="BorderBrush" Value="#0099CC"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Upgrade Card Style -->
        <Style x:Key="CompactUpgradeCard" TargetType="Border">
            <Setter Property="Background" Value="#fafafaff"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Width" Value="180"/>
            <Setter Property="MinHeight" Value="95"/>
            <Setter Property="Margin" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#0099CC"/>
                    <Setter Property="BorderThickness" Value="3"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Buy Button - Affordable (Green) -->
        <Style x:Key="BuyButtonAffordable" TargetType="Button">
            <Setter Property="Background" Value="#10B981"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#059669"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Buy Button - Unaffordable (Gray) -->
        <Style x:Key="BuyButtonUnaffordable" TargetType="Button">
            <Setter Property="Background" Value="#CCCCCC"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="IsEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Buy Button - Maxed (Blue) -->
        <Style x:Key="BuyButtonMaxed" TargetType="Button">
            <Setter Property="Background" Value="#0099CC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="IsEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <!-- Main Container: ê²€ì€ìƒ‰ ë°°ê²½ (ê¸€ëž˜ìŠ¤ì˜ ë² ì´ìŠ¤) -->
    <Border Background="#551A1A1A" CornerRadius="15" BorderBrush="Black" BorderThickness="2">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="40" ShadowDepth="0" Opacity="0.8"/>
        </Border.Effect>

        <Grid Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>   <!-- Header -->
                <RowDefinition Height="Auto"/>   <!-- Tabs -->
                <RowDefinition Height="*"/>      <!-- Content (ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì‚¬ìš©) -->
                <RowDefinition Height="Auto"/>   <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- â­ HEADER: Glass Morphism (Top) -->
            <Border Grid.Row="0" Background="#66666666" CornerRadius="10,10,0,0" Padding="12,10"
                    BorderBrush="#33FFFFFF" BorderThickness="1"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown" Cursor="SizeAll">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <!-- Help -->
                        <ColumnDefinition Width="*"/>
                        <!-- Title -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Currency -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Close -->
                    </Grid.ColumnDefinitions>

                    <!-- Help Button (Left) -->
                    <Button Grid.Column="0" Width="32" Height="32" Margin="0,0,10,0"
                            Background="#44FFFFFF" BorderBrush="#33FFFFFF" BorderThickness="1"
                            Cursor="Hand" ToolTip="ë„ì›€ë§"
                            Click="HelpButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6">
                                    <TextBlock Text="â“" FontSize="16" Foreground="White"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#66FFFFFF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Title (Center) -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Image Source="pack://application:,,,/Assets/Images/UI/crystal.png" Width="28" Height="28" Margin="0,0,6,0"/>
                        <TextBlock Text="ì˜êµ¬ ì—…ê·¸ë ˆì´ë“œ ìƒì " FontSize="16" FontWeight="Bold"
                                   Foreground="#0099CC" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Currency Display (Right, before Close) -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,10,0">
                        <Border Background="#0099CC" CornerRadius="6" Padding="8,4" Margin="0,0,8,0">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="pack://application:,,,/Assets/Images/UI/crystal.png" Width="24" Height="24"
                                       VerticalAlignment="Center" Margin="0,0,4,0"/>
                                <TextBlock x:Name="CurrentCrystalsText" Text="0" FontSize="14"
                                           FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        <StackPanel VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Close Button (Right) -->
                    <Button Grid.Column="3" Width="32" Height="32"
                            Background="#66FF4444" BorderBrush="#FF6666" BorderThickness="1"
                            Cursor="Hand" ToolTip="ë‹«ê¸°"
                            Click="CloseButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6">
                                    <TextBlock Text="âœ•" FontSize="16" Foreground="White"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#88FF4444"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <!-- ðŸŽ¯ TABS: Glass Morphism -->
            <Border Grid.Row="1" Background="#66666666" Padding="15,10"
                    BorderBrush="#33FFFFFF" BorderThickness="0,0,0,1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="0" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <RadioButton x:Name="TabBaseStats" Style="{StaticResource TabButton}"
                                 Margin="0,0,8,0" IsChecked="True" Checked="Tab_Checked">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš”ï¸ ê¸°ë³¸ ëŠ¥ë ¥"/>
                            <TextBlock x:Name="BadgeBaseStats" Text="" FontSize="10" FontWeight="Bold"
                                       Foreground="#10B981" Margin="6,0,0,0"/>
                        </StackPanel>
                    </RadioButton>
                    <RadioButton x:Name="TabCurrencyBonus" Style="{StaticResource TabButton}"
                                 Margin="0,0,8,0" Checked="Tab_Checked">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ’° ìž¬í™” ë³´ë„ˆìŠ¤"/>
                            <TextBlock x:Name="BadgeCurrencyBonus" Text="" FontSize="10" FontWeight="Bold"
                                       Foreground="#10B981" Margin="6,0,0,0"/>
                        </StackPanel>
                    </RadioButton>
                    <RadioButton x:Name="TabUtility" Style="{StaticResource TabButton}"
                                 Margin="0,0,8,0" Checked="Tab_Checked">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™ï¸ ìœ í‹¸ë¦¬í‹°"/>
                            <TextBlock x:Name="BadgeUtility" Text="" FontSize="10" FontWeight="Bold"
                                       Foreground="#10B981" Margin="6,0,0,0"/>
                        </StackPanel>
                    </RadioButton>
                    <RadioButton x:Name="TabStartingBonus" Style="{StaticResource TabButton}"
                                 Checked="Tab_Checked">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸš€ ì‹œìž‘ ë³´ë„ˆìŠ¤"/>
                            <TextBlock x:Name="BadgeStartingBonus" Text="" FontSize="10" FontWeight="Bold"
                                       Foreground="#10B981" Margin="6,0,0,0"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>
            </Border>

            <!-- ðŸ“¦ CONTENT: Light Background -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="15,15,15,15"
                          Background="#99666666">
                <Grid x:Name="UpgradeGrid" HorizontalAlignment="Center">
                    <!-- Dynamically populated -->
                </Grid>
            </ScrollViewer>

            <!-- ðŸ”½ FOOTER: Glass Morphism -->
            <Border Grid.Row="3" Background="#66666666" CornerRadius="0,0,10,10" Padding="15,10"
                    BorderBrush="#33FFFFFF" BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                </Border.Effect>
                <!-- Hints -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Border Background="#44FFFFFF" CornerRadius="8" Padding="10,6"
                            BorderBrush="#33FFFFFF" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ’¡" FontSize="11" Margin="0,0,4,0"/>
                            <TextBlock Text="ë³´ìŠ¤ë¥¼ ì²˜ì¹˜í•˜ë©´ í¬ë¦¬ìŠ¤íƒˆ íšë“!" FontSize="11"
                                       Foreground="#FFFFFF" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
