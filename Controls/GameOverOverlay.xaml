<UserControl x:Class="DeskWarrior.Controls.GameOverOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:DeskWarrior.ViewModels">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </UserControl.Resources>

    <Border Background="#CC000000">
        <Border Background="#3A3A3A"
                BorderBrush="#00CED1"
                BorderThickness="2"
                CornerRadius="8"
                Padding="16,12"
                Margin="8"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">
            <Border.Effect>
                <DropShadowEffect Color="#00CED1" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
            </Border.Effect>
            <StackPanel>
                <!-- ì œëª© -->
                <TextBlock Text="âš°ï¸ GAME OVER"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#FF4444"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,6">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="Red" BlurRadius="8" ShadowDepth="0"/>
                    </TextBlock.Effect>
                </TextBlock>

                <!-- ê²Œìž„ ì˜¤ë²„ ë©”ì‹œì§€ -->
                <TextBlock Text="{Binding GameOverMessage}"
                           Foreground="#AAA"
                           FontSize="8"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           Margin="0,0,0,8"
                           TextWrapping="Wrap"
                           MaxWidth="260"/>

                <!-- ì„¸ì…˜ í†µê³„ -->
                <TextBlock Text="ðŸ“Š ì„¸ì…˜ ê²°ê³¼"
                           FontSize="12"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,4"/>
                <Border Background="#222" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Padding="10,6" Margin="0,0,0,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- ë ˆë²¨ -->
                        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,4">
                            <TextBlock Text="ë ˆë²¨" FontSize="8" Foreground="#888"/>
                            <TextBlock Text="{Binding LevelText}" FontSize="11" Foreground="White" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- ëª¬ìŠ¤í„° -->
                        <StackPanel Grid.Column="1" Grid.Row="0" Margin="8,0,0,4">
                            <TextBlock Text="ëª¬ìŠ¤í„°" FontSize="8" Foreground="#888"/>
                            <TextBlock FontSize="11" Foreground="White" FontWeight="Bold">
                                <Run Text="{Binding KillsText}"/>
                                <Run Text="ë§ˆë¦¬" FontSize="9" Foreground="#AAA"/>
                            </TextBlock>
                        </StackPanel>

                        <!-- ë°ë¯¸ì§€ -->
                        <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,8,0">
                            <TextBlock Text="ë°ë¯¸ì§€" FontSize="8" Foreground="#888"/>
                            <TextBlock Text="{Binding DamageText}" FontSize="11" Foreground="#FF8888" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- ê³¨ë“œ -->
                        <StackPanel Grid.Column="1" Grid.Row="1" Margin="8,0,0,0">
                            <TextBlock Text="ê³¨ë“œ" FontSize="8" Foreground="#888"/>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="pack://application:,,,/Assets/Images/UI/gold.png" Width="11" Height="11" VerticalAlignment="Center" Margin="0,0,2,0"/>
                                <TextBlock Text="{Binding GoldText}" FontSize="11" Foreground="#FFD700" FontWeight="Bold" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- í¬ë¦¬ìŠ¤íƒˆ íšë“ (ê°„ë‹¨ í‘œì‹œ) -->
                <Border Background="#2A2A2A"
                        BorderBrush="#00CED1"
                        BorderThickness="1"
                        CornerRadius="5"
                        Padding="10,8"
                        Margin="0,0,0,8">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Image Source="pack://application:,,,/Assets/Images/UI/crystal.png" Width="18" Height="18" VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <TextBlock FontSize="14" FontWeight="Bold" Foreground="#00CED1" VerticalAlignment="Center">
                            <Run Text="+"/>
                            <Run Text="{Binding TotalCrystalsEarned}"/>
                        </TextBlock>
                        <TextBlock Text=" (ë³´ìœ : " FontSize="10" Foreground="#666" VerticalAlignment="Center" Margin="8,0,0,0"/>
                        <TextBlock Text="{Binding CurrentCrystalBalance, StringFormat=N0}" FontSize="10" Foreground="#00CED1" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        <TextBlock Text=")" FontSize="10" Foreground="#666" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- ì•¡ì…˜ ë²„íŠ¼ -->
                <Grid HorizontalAlignment="Center" Margin="0,4,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button x:Name="ShopButton"
                            Grid.Column="0"
                            Content="ðŸ›’ ìƒì  (S)"
                            Command="{Binding ShopCommand}"
                            Width="100"
                            Height="32"
                            Margin="0,0,6,0"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="11"
                            FontWeight="Bold">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#00CED1" Offset="0"/>
                                <GradientStop Color="#1DD1D1" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="8"/>
                            </Style>
                        </Button.Resources>
                        <Button.Effect>
                            <DropShadowEffect Color="#00CED1" BlurRadius="12" ShadowDepth="2" Opacity="0.4"/>
                        </Button.Effect>
                    </Button>
                    <Button x:Name="CloseOverlayButton"
                            Grid.Column="1"
                            Content="â–¶ï¸ ê²Œìž„ (SPACE)"
                            Command="{Binding CloseCommand}"
                            Width="100"
                            Height="32"
                            Margin="6,0,0,0"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="11"
                            FontWeight="Bold">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#E8D03F" Offset="0"/>
                                <GradientStop Color="#B89F2C" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="8"/>
                            </Style>
                        </Button.Resources>
                        <Button.Effect>
                            <DropShadowEffect Color="#E8D03F" BlurRadius="12" ShadowDepth="2" Opacity="0.4"/>
                        </Button.Effect>
                    </Button>
                </Grid>

                <!-- ìžë™ ë‹«ê¸° ì¹´ìš´íŠ¸ë‹¤ìš´ -->
                <TextBlock Text="{Binding CountdownText}"
                           Foreground="#666"
                           FontSize="8"
                           HorizontalAlignment="Center"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>
    </Border>
</UserControl>
