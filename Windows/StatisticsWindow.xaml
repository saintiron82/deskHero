<Window x:Class="DeskWarrior.Windows.StatisticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Statistics"
        Width="580"
        Height="600"
        MinHeight="400"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        Topmost="False"
        KeyDown="Window_KeyDown">

    <Window.Resources>
        <!-- Tab Button Style (Shopê³¼ ë™ì¼) -->
        <Style x:Key="TabButton" TargetType="RadioButton">
            <Setter Property="Background" Value="#44FFFFFF"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#33FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#66FFFFFF"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background" Value="#0099CC"/>
                    <Setter Property="BorderBrush" Value="#0099CC"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Filter Button Style -->
        <Style x:Key="FilterButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#44FFFFFF"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#33FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,4"/>
            <Setter Property="Margin" Value="3,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Stats Card Style -->
        <Style x:Key="StatsCard" TargetType="Border">
            <Setter Property="Background" Value="#CC1A1A1A"/>
            <Setter Property="BorderBrush" Value="#33FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- Close Button Style -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#4A5A6A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#5A6A7A"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- Main Container: Glass Morphism Frame -->
    <Border Background="#551A1A1A" CornerRadius="15" BorderBrush="Black" BorderThickness="2">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="40" ShadowDepth="0" Opacity="0.8"/>
        </Border.Effect>

        <Grid Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>   <!-- Header -->
                <RowDefinition Height="Auto"/>   <!-- Tabs -->
                <RowDefinition Height="*"/>      <!-- Content -->
                <RowDefinition Height="Auto"/>   <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- HEADER: Glass Morphism -->
            <Border Grid.Row="0" Background="#CC666666" CornerRadius="10,10,0,0" Padding="10,8"
                    BorderBrush="#33FFFFFF" BorderThickness="1"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown" Cursor="SizeAll">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>  <!-- Help -->
                        <ColumnDefinition Width="*"/>     <!-- Title -->
                        <ColumnDefinition Width="Auto"/>  <!-- Close -->
                    </Grid.ColumnDefinitions>

                    <!-- Help Button (Left) -->
                    <Button x:Name="HelpButton" Grid.Column="0" Width="32" Height="32" Margin="0,0,10,0"
                            Background="#44FFFFFF" BorderBrush="#33FFFFFF" BorderThickness="1"
                            Cursor="Hand"
                            Click="HelpButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6">
                                    <TextBlock Text="?" FontSize="16" Foreground="White" FontWeight="Bold"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#66FFFFFF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Title (Center) -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸ“Š" FontSize="20" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TitleText" FontSize="16" FontWeight="Bold"
                                   Foreground="#0099CC" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Close Button (Right) -->
                    <Button x:Name="HeaderCloseButton" Grid.Column="2" Width="32" Height="32"
                            Background="#66FF4444" BorderBrush="#FF6666" BorderThickness="1"
                            Cursor="Hand"
                            Click="CloseButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6">
                                    <TextBlock Text="X" FontSize="14" Foreground="White" FontWeight="Bold"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#88FF4444"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <!-- TABS: Glass Morphism -->
            <Border Grid.Row="1" Background="#CC666666" Padding="10,8"
                    BorderBrush="#33FFFFFF" BorderThickness="0,0,0,1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="0" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <RadioButton x:Name="TabBattleRecord" Style="{StaticResource TabButton}"
                                 Margin="0,0,8,0" IsChecked="True" Checked="Tab_Checked">
                        <TextBlock x:Name="TabBattleRecordText"/>
                    </RadioButton>
                    <RadioButton x:Name="TabAchievements" Style="{StaticResource TabButton}"
                                 Margin="0,0,8,0" Checked="Tab_Checked">
                        <TextBlock x:Name="TabAchievementsText"/>
                    </RadioButton>
                    <RadioButton x:Name="TabDamageMeter" Style="{StaticResource TabButton}"
                                 Checked="Tab_Checked">
                        <TextBlock x:Name="TabDamageMeterText"/>
                    </RadioButton>
                </StackPanel>
            </Border>

            <!-- CONTENT -->
            <Border Grid.Row="2" Background="#DD666666">
                <Grid Margin="8,6,8,6">
                    <!-- Battle Record Content -->
                    <ScrollViewer x:Name="BattleRecordContent" Visibility="Visible" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                        <!-- Time Filters -->
                        <Border Background="#AA444444" CornerRadius="6" Padding="6,4" Margin="0,0,0,4">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock x:Name="LblTimeRange" Text="TIME RANGE" Foreground="#AAAAAA"
                                           FontWeight="Bold" FontSize="10" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <Button x:Name="BtnRange1H" Content="1H" Style="{StaticResource FilterButtonStyle}" Click="Filter_Click" Tag="1H"/>
                                <Button x:Name="BtnRange24H" Content="24H" Style="{StaticResource FilterButtonStyle}" Click="Filter_Click" Tag="24H"/>
                                <Button x:Name="BtnRange7D" Content="7D" Style="{StaticResource FilterButtonStyle}" Click="Filter_Click" Tag="7D"/>
                            </StackPanel>
                        </Border>

                        <!-- ==================== BEST (ìµœê³  ê¸°ë¡) ==================== -->
                        <Border Style="{StaticResource StatsCard}">
                            <StackPanel>
                                <TextBlock x:Name="LblBestRecord" Text="BEST" Foreground="#FFD700" FontWeight="Bold" FontSize="10" Margin="0,0,0,4"/>

                                <!-- ê¸°ë¡ ì—†ìŒ ì‹œ í‘œì‹œ -->
                                <TextBlock x:Name="TxtNoRecord" Text="No record" Foreground="#666666" FontStyle="Italic" HorizontalAlignment="Center" Visibility="Collapsed"/>

                                <!-- 4x2 ê·¸ë¦¬ë“œ -->
                                <Grid x:Name="BestRecordGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Row 0: Keyboard, Mouse, Level, Kills -->
                                    <Border Grid.Row="0" Grid.Column="0" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="0,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestKeyboard" Text="âŒ¨ï¸" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestKeyboard" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="1" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestMouse" Text="ðŸ–±ï¸" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestMouse" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="2" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="2,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestLevel" Text="LV" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestLevel" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="3" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,0,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestKills" Text="KILL" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestKills" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Row 1: Damage, Gold, Crystals, IPM -->
                                    <Border Grid.Row="1" Grid.Column="0" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="0,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestDamage" Text="DMG" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestDamage" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="1" Background="#AAFFD700" CornerRadius="4" Padding="4" Margin="2,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestGold" Text="GOLD" Foreground="#FFD700" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestGold" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="2" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="2,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestCrystals" Text="ðŸ’Ž" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestCrystals" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="3" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,0,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblBestIPM" Text="IPM" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtBestIPM" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- ==================== RATIO (ìž…ë ¥ ë¹„ìœ¨) ==================== -->
                        <Border Style="{StaticResource StatsCard}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" x:Name="LblInputRatio" Text="RATIO"
                                           Foreground="#AAAAAA" FontWeight="Bold" FontSize="11" VerticalAlignment="Center"/>

                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock x:Name="TxtKeyboardPercent" Text="0%" Foreground="#0099CC" FontSize="14" FontWeight="Bold" Margin="0,0,4,0"/>
                                    <TextBlock Text="âŒ¨ï¸" FontSize="12" VerticalAlignment="Center" Margin="0,0,15,0"/>
                                    <TextBlock x:Name="TxtMousePercent" Text="0%" Foreground="#10B981" FontSize="14" FontWeight="Bold" Margin="0,0,4,0"/>
                                    <TextBlock Text="ðŸ–±ï¸" FontSize="12" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- ==================== CUMULATIVE (ëˆ„ì  í†µê³„) ==================== -->
                        <Border Style="{StaticResource StatsCard}">
                            <StackPanel>
                                <TextBlock x:Name="LblCumulative" Text="CUMULATIVE" Foreground="#AAAAAA" FontWeight="Bold" FontSize="10" Margin="0,0,0,4"/>

                                <!-- 4x2 ê·¸ë¦¬ë“œ (BESTì™€ ë™ì¼ êµ¬ì¡°) -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Row 0: Keyboard, Mouse, Level, Kills -->
                                    <Border Grid.Row="0" Grid.Column="0" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="0,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumKeyboard" Text="âŒ¨ï¸" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumKeyboard" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="1" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumMouse" Text="ðŸ–±ï¸" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumMouse" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="2" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="2,0,2,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumLevel" Text="LV" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumLevel" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="0" Grid.Column="3" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,0,2">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumKills" Text="KILL" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumKills" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Row 1: Damage, Gold, Crystals, IPM -->
                                    <Border Grid.Row="1" Grid.Column="0" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="0,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumDamage" Text="DMG" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumDamage" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="1" Background="#AAFFD700" CornerRadius="4" Padding="4" Margin="2,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumGold" Text="GOLD" Foreground="#FFD700" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumGold" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="2" Background="#AA0099CC" CornerRadius="4" Padding="4" Margin="2,0,2,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumCrystals" Text="ðŸ’Ž" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumCrystals" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Grid.Row="1" Grid.Column="3" Background="#AA10B981" CornerRadius="4" Padding="4" Margin="2,0,0,0">
                                        <StackPanel>
                                            <TextBlock x:Name="LblCumIPM" Text="IPM" Foreground="#10B981" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="TxtCumIPM" Text="0" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Achievements Content -->
                    <ScrollViewer x:Name="AchievementsContent" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="AchievementsPanel">
                            <TextBlock Text="Loading achievements..." Foreground="#666666" FontStyle="Italic" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Damage Meter Content -->
                    <Grid x:Name="DamageMeterContent" Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>  <!-- Summary -->
                            <RowDefinition Height="Auto"/>  <!-- Legend (ê³ ì •) -->
                            <RowDefinition Height="*"/>     <!-- Records List -->
                        </Grid.RowDefinitions>

                        <!-- Summary -->
                        <Border Grid.Row="0" Style="{StaticResource StatsCard}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                    <TextBlock x:Name="LblDmRecordCount" Text="RECORDS" Foreground="#AAAAAA" FontSize="9" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TxtDmRecordCount" Text="0" Foreground="White" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                    <TextBlock x:Name="LblDmAvgDamage" Text="AVG" Foreground="#AAAAAA" FontSize="9" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TxtDmAvgDamage" Text="0" Foreground="#0099CC" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                    <TextBlock x:Name="LblDmMaxDamage" Text="MAX" Foreground="#AAAAAA" FontSize="9" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TxtDmMaxDamage" Text="0" Foreground="#FF6B6B" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- Legend (ê³ ì •) -->
                        <Border Grid.Row="1" Style="{StaticResource StatsCard}">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock x:Name="LblDmLegend" Text="LEGEND:" Foreground="#AAAAAA" FontWeight="Bold" FontSize="9" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock Text="Base" Foreground="#888888" FontSize="9" FontWeight="SemiBold" Margin="0,0,6,0"/>
                                <TextBlock Text="+Atk" Foreground="#0099CC" FontSize="9" FontWeight="SemiBold" Margin="0,0,6,0"/>
                                <TextBlock Text="Ã—Mult" Foreground="#10B981" FontSize="9" FontWeight="SemiBold" Margin="0,0,6,0"/>
                                <TextBlock Text="Ã—Crit" Foreground="#FF6B6B" FontSize="9" FontWeight="SemiBold" Margin="0,0,6,0"/>
                                <TextBlock Text="Ã—Multi" Foreground="#FFD700" FontSize="9" FontWeight="SemiBold" Margin="0,0,6,0"/>
                                <TextBlock Text="Ã—Combo" Foreground="#FF69B4" FontSize="9" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>

                        <!-- Damage Records List (ìŠ¤í¬ë¡¤ ê°€ëŠ¥) -->
                        <Border Grid.Row="2" Style="{StaticResource StatsCard}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Row="0" x:Name="LblDmRecentHits" Text="RECENT HITS" Foreground="#FFD700" FontWeight="Bold" FontSize="10" Margin="0,0,0,4"/>
                                <TextBlock Grid.Row="1" x:Name="TxtDmNoRecords" Text="No damage records yet" Foreground="#666666" FontStyle="Italic" HorizontalAlignment="Center" Visibility="Collapsed"/>
                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" MaxHeight="320">
                                    <ItemsControl x:Name="DamageRecordsList">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#AA444444" CornerRadius="4" Padding="6,4" Margin="0,0,0,2">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <!-- Input Type Icon -->
                                                        <TextBlock Grid.Column="0" Text="{Binding InputIcon}" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                        <!-- Breakdown (colored parts) -->
                                                        <ItemsControl Grid.Column="1" ItemsSource="{Binding BreakdownParts}" VerticalAlignment="Center">
                                                            <ItemsControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel Orientation="Horizontal"/>
                                                                </ItemsPanelTemplate>
                                                            </ItemsControl.ItemsPanel>
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <TextBlock Text="{Binding Text}" Foreground="{Binding Color}" FontSize="10" FontWeight="SemiBold" Margin="0,0,4,0"/>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>
                                                        <!-- Final Damage -->
                                                        <TextBlock Grid.Column="2" Text="{Binding FinalDamageText}" Foreground="{Binding DamageColor}" FontSize="12" FontWeight="Bold" VerticalAlignment="Center"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Border>

            <!-- FOOTER: Glass Morphism -->
            <Border Grid.Row="3" Background="#CC666666" CornerRadius="0,0,10,10" Padding="10,8"
                    BorderBrush="#33FFFFFF" BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                </Border.Effect>
                <Button x:Name="CloseButton" Content="CLOSE"
                        Style="{StaticResource CloseButtonStyle}"
                        Click="CloseButton_Click"
                        HorizontalAlignment="Center"/>
            </Border>
        </Grid>
    </Border>
</Window>
